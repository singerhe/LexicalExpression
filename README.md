## 简介

词法表达式(lexical expression，以下简称Lexex) 描述了一种文本&标记的匹配模式，可以用来检查一个文本&标记序列是否含有某种子串，并能从序列中取出符合条件的子串等。

> 例如：
>
> * 我想听/% + */channel + 新闻/%`，可以匹配“我想听(科技/体育/娱乐/财经/……)新闻”等等任何频道所组成的内容，只要括号中的词语可以被打上`channel`的标记即可。*
>
> * /person + 爱上了/% + */object = {source:1} + {target:3}`，可以匹配包括“张三爱上了游泳”、“李四爱上了文玩”等等符合等于号左边模式的内容，并且，可以将相应的内容依照等式右边的形式提取出来，即`source:张三;target:游泳`、`source:李四;target:文玩`，只要内容中的人名以及实体名称被正确打上标记即可。
**词法表达式 vs 正则表达式**

词法表达式是正则表达式在自然语言文本处理这一特定场景下的加强版本。在设计层面上，词法表达式沿用了正则表达式的许多语法以及表达形式，这样设计的目的是让使用者可以在熟悉正则表达式的前提下，轻松了解并掌握词法表达式。

两种表达式之间最大的不同点，在于**词法表达式不单单只是对文本字符串序列本身进行匹配，而是同时要对内容的文本序列以及标记序列进行匹配**。使用者可以通过对两个序列匹配条件的灵活组合创造出强大而且通用的规则模板，从而从容应对自然语言处理中复杂多样的语言表示形态。

## 特性

Lexex是专门应用于自然语言处理的规则匹配工具，具备以下特性：

* 提供文本&标记匹配的规则匹配方式，支持文本或标记任意一项为通配符
* 支持匹配查询、匹配提取、穷举提取三种查询模式
* 不限制标记匹配符范围
* 支持提取合并、分组
* 支持自定义提取标签

## 下载与安装

只需要将本项目下的`./src/lexex.py`文件添加到你的项目中即可。


## 使用方法

* 这是一个简单的序列标注词语提取的例子。首先，需要编写简单的规则文件`example.rule`。

```
*/s = {hit:1}
*/b + #[*/m] + */e = {hit:1,2,3}
```

* 接着，使用`lexex`模块并加载规则模型。

``` python
import lexex
lex = lexex.Lexex("example.rule")
```

* 这时，你可以在python上任意提取系列标注词语了。

``` python
hits = lex.match(["司","马","光","砸","缸"],["b","m","e","o","o"], 0)
for key, value in hits:
    print "key: %s\tvalue: %s" % (key, str(' '.join(value)))
    
## key: hit    value: 司马光
```

想深入了解Lexex的设计与原理，请参考 **Lexex——词法表达式**